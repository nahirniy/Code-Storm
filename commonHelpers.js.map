{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart-content/product-list/pr-list-markap.js","../src/js/cart-content/product-list/pr-list-localStorage.js","../src/js/cart-content/product-list/product-list.js","../src/js/modals/modal-order/modal-order.js","../src/js/cart-content/order-products/order-products.js"],"sourcesContent":["// функция разметки корзины с товаром\nexport const funCartCreateMarkup = function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        name,\n        category,\n        size,\n        price,\n        img,\n        _id,\n      }) => `<li class=\"cart-item\" data-id=\"${_id}\">\n      <div class=\"cart-item-wrap\">\n        <div class=\"cart-img-container\">\n          <img class=\"cart-img\" src=\"${img}\" alt=\"${name}\" />\n        </div>\n        <div class=\"cart-img-text\">\n          <h3 class=\"cart-item-title\">${name}</h3>\n          <div class=\"cart-info-container\">\n            <p class=\"cart-info\">\n              Category:\n              <span>${category.replaceAll('_', ' ')}</span>\n            </p>\n            <p class=\"cart-info\">\n              Size:\n              <span>${size}</span>\n            </p>\n          </div>\n          <h3 class=\"cart-info-price\">$${price}</h3>\n        </div> \n      </div>\n      <div class=\"cart-btn-wrap\">\n        <button name=\"button\" type=\"button\" class=\"cart-btn-close\">\n          <svg class=\"cart-icon-close\">\n            <use href=\"./img/icons/sprite.svg#icon-close\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>`\n    )\n    .join('');\n};\n// функция разметки пустой корзины\nexport const funEmplyCartCreateMarkup = function createEmplyMarkup() {\n  const emplyMarkup = `<div class=\"cart-yellow-container\">\n  <img\n    class=\"cart-yellow-img\"\n    src=\"./img/cart/yellow shopping basket .png \"\n    alt=\"yellow shopping basket \"\n  />\n\n  <h3 class=\"cart-yellow-title\">\n    Your basket is <span class=\"cart-yellow-span\">empty...</span>\n  </h3>\n  <p class=\"cart-yellow-text\">\n    Go to the main page to select your favorite <br />\n    products and add them to the cart.\n  </p>\n</div>`;\n  return emplyMarkup;\n};\n","// забрираю массив с локалсторож\nexport const funLoadFromLS = function loadFromLS(key) {\n  const dataCart = localStorage.getItem(key);\n  try {\n    // console.log(JSON.parse(dataCart));\n    return JSON.parse(dataCart);\n  } catch {\n    // console.log(dataCart);\n    return dataCart;\n  }\n};\n\n// удаление всех элементов из локалстораж при клике на del all\nexport const funLoadLellAllLS = function LoadLellAllLS(key) {\n  localStorage.removeItem(key);\n};\n","import { funCartCreateMarkup } from './pr-list-markap';\nimport { funEmplyCartCreateMarkup } from './pr-list-markap';\nimport { funLoadFromLS } from './pr-list-localStorage';\nimport { funLoadLellAllLS } from './pr-list-localStorage';\n// console.log('чаокакао');\n// console.log(funEmplyCartCreateMarkup());\nconst refs = {\n  cartTitle: document.querySelector('.cart-title'),\n  cartTitleContainer: document.querySelector('.cart-title-container'),\n  cartItemContainer: document.querySelector('.cart-item-container'),\n  cartBtnDelAll: document.querySelector('.cart-btn-del-all'),\n};\n// console.log(refs.cartBtnItem);\n// console.log(refs.cartTitleContainer);\nrefs.cartItemContainer.addEventListener('click', onCartItem);\nrefs.cartBtnDelAll.addEventListener('click', onCartDellAll);\n\nconst LOCALSTORAGE_KEY = 'basket';\nlet cartResults = funLoadFromLS(LOCALSTORAGE_KEY);\nlet arrayLength = cartResults.length;\nlet newTotal = cartTotal(cartResults);\n// console.log(newTotal);\ncartProductList();\n\n// console.log(cartResults);\n// console.log(cartResults[0]._id);\n\n// колбек кнопки удалить все\nfunction onCartDellAll() {\n  refs.cartItemContainer.innerHTML = '';\n  // очистка локал стораж\n  funLoadLellAllLS(LOCALSTORAGE_KEY);\n  refs.cartBtnDelAll.classList.add('cart-display-none');\n  cartEmply();\n}\n\n// колбек удаления поштучно\nfunction onCartItem(evt) {\n  // console.log(evt.target.nodeName);\n\n  const evtBtn = evt.target.closest('.cart-btn-close');\n  // console.log(evtBtn);\n  if (!evtBtn.nodeName) {\n    return;\n  }\n  // console.dir(evt.target);\n  // const cartItemDell = evt.target.parentNode.parentNode.parentNode;\n  const cartItemDell = evt.target.closest('.cart-item');\n  const cartIdDell = cartItemDell.dataset.id;\n  // удаление элемента из локалстораж и разметки\n  const indexToRemove = cartResults.findIndex(obj => obj._id === cartIdDell);\n  // console.log(indexToRemove);\n  cartResults.splice(indexToRemove, 1);\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(cartResults));\n  cartItemDell.remove();\n  //============\n  arrayLength -= 1;\n  cartTitleAdd(arrayLength);\n  // берем новый масив из локал сторож и  пересситываем тотал\n  newTotal = cartTotal(cartResults);\n  console.log(newTotal);\n  // если в корзине пусто - выводим пустую корзину\n  const recountItem = evt.currentTarget.childNodes.length;\n  if (recountItem === 0) {\n    refs.cartBtnDelAll.classList.add('cart-display-none');\n    cartEmply();\n  }\n}\n\n// добавление заголовка\nfunction cartTitleAdd(leng) {\n  refs.cartTitleContainer.classList.remove('cart-display-none');\n  refs.cartTitle.textContent = `cart(${leng})`;\n}\n// главная функция-создание контента корзины\nfunction cartProductList() {\n  cartTitleAdd(arrayLength);\n  if (!arrayLength) {\n    cartEmply();\n    return;\n  }\n  refs.cartBtnDelAll.classList.remove('cart-display-none');\n  refs.cartItemContainer.innerHTML = funCartCreateMarkup(cartResults);\n}\n\n// функция для пустой корзины\nfunction cartEmply() {\n  cartTitleAdd(0);\n  refs.cartItemContainer.innerHTML = funEmplyCartCreateMarkup();\n}\n// функция для подсчета тотал\nfunction cartTotal(results) {\n  const totalPrice = results.reduce((total, result) => {\n    return total + result.price;\n  }, 0);\n  return totalPrice;\n}\n","import { saveToLS } from '../../services/helpers';\n\nexport function modalOrder() {\n  const modalBackdropOrder = document.querySelector(\".modal-backdrop-order\");\n  const modalOrder = document.querySelector(\".modal-order\");\n\n  modalBackdropOrder.classList.remove(\"is-hidden\");\n  modalOrder.classList.remove(\"is-hidden\");\n\n}\nconst modalOrderClose = document.querySelector(\".modal-order-close\");\nmodalOrderClose.addEventListener(\"click\", (event) => {\n  const modalBackdropOrder = document.querySelector(\".modal-backdrop-order\");\n  const modalOrder = document.querySelector(\".modal-order\");\n  modalBackdropOrder.classList.add(\"is-hidden\");\n  modalOrder.classList.add(\"is-hidden\");\n\n  const LOCALSTORAGE_KEY = 'basket';\n  saveToLS(LOCALSTORAGE_KEY, []);\n  document.querySelector(\".order-products-sum\").textContent = \"$0.00\";\n} );\n\n","import { modalOrder } from \"../../modals/modal-order/modal-order\";\nimport { addOrder } from \"../../services/food-api\";\nimport { Notify } from \"notiflix\";\nimport { loadFromLS } from '../../services/helpers';\n\nconst LOCALSTORAGE_KEY = 'basket';\nconst basket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\nconst basketSum = basket.reduce((sum, product) => sum + product.price, 0);\nconst orderProductsSum = document.querySelector(\".order-products-sum\");\norderProductsSum.textContent = `$${String(basketSum.toFixed(2))}`;\n\nconst orderForm = document.querySelector('.order-products-form');\norderForm.addEventListener('submit', (event) => {\n  event.preventDefault();\n  const emailInput = event.target.querySelector('#email');\n  const email = emailInput.value;\n\n  console.log('Order Details:');\n  console.log('Email:', email);\n  const orderProducts = basket.map(product => {\n    return {\n      productId: product._id,\n      amount: product.price\n    }\n  });\n\n  addOrder({\n    email: email, products: orderProducts\n  })\n    .then(() => {\n      modalOrder();\n    })\n    .catch(error => {\n\n    })\n\n  orderForm.reset();\n});\n"],"names":["funCartCreateMarkup","arr","name","category","size","price","img","_id","funEmplyCartCreateMarkup","funLoadFromLS","key","dataCart","funLoadLellAllLS","refs","onCartItem","onCartDellAll","LOCALSTORAGE_KEY","cartResults","arrayLength","newTotal","cartTotal","cartProductList","cartEmply","evt","cartItemDell","cartIdDell","indexToRemove","obj","cartTitleAdd","leng","results","total","result","modalOrder","modalBackdropOrder","modalOrderClose","event","saveToLS","basket","loadFromLS","basketSum","sum","product","orderProductsSum","orderForm","email","orderProducts","addOrder","error"],"mappings":"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"}