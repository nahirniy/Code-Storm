import{S as b,a}from"./vendor-a81688c2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const u="/Code-Storm/assets/sprite-7f96c85e.svg";function w(e,s){localStorage.setItem(e,JSON.stringify(s))}function B(e){const s=localStorage.getItem(e);try{return JSON.parse(s)}catch{return y(),s}}function S(e){const{keyword:s,category:t,page:n,limit:o,...c}=e,i=Object.keys(c).length,h=new URLSearchParams({page:n,limit:o});if(s&&h.set("keyword",s),t&&h.set("category",t),i){const[L,k]=Object.entries(c)[0];h.set(L,k)}return h}function C(e,s,t){const n=t.findIndex(o=>o._id===s._id);n!==-1?t.splice(n,1):t.push(s),w(e,t),I(t)}function I(e){const s=document.querySelector(".number-products"),t=e.length;s.textContent=t}function J(e){return e.replaceAll("_"," ")}function y(){b.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function U(){document.querySelector(".loader-container").classList.remove("is-hidden")}function j(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),300)}function A(e,s){return JSON.stringify(e)!==JSON.stringify(s)}function D(e,s,t){for(let n=0;n<e.length;n+=1)switch(!0){case e[n].classList.contains("main-products-btn"):E(e[n],s,t);break;case e[n].classList.contains("popular-products-btn"):P(e[n],s,t);break;case e[n].classList.contains("discount-products-btn"):O(e[n],s,t);break}}function E(e,s,t){const n=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:i})=>i===s);e.innerHTML=c?n:o}function O(e,s,t){const n=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:i})=>i===s);e.innerHTML=c?n:o}function P(e,s,t){const n=`<svg class="light-checkmark" width="12" height="12">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="light-basket" width="12" height="12">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:i})=>i===s);e.innerHTML=c?n:o}a.defaults.baseURL="https://food-boutique.b.goit.study/api";const H=async()=>{const{data:e}=await a.get("/products/categories");return e},_=async e=>{const s=S(e),{data:t}=await a.get("/products/",{params:s});return t},F=async e=>{const{data:s}=await a.get(`/products/${e}`);return s},R=async e=>{const{data:s}=await a.get(`/products/popular?limit=${e}`);return s},K=async()=>{const{data:e}=await a.get("/products/discount");return e},z=async e=>{const{data:s}=await a.post("/orders",e);return s},q=async e=>{const{data:s}=await a.post("/subscription",e);return s},v=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),l=document.querySelector(".modal-unsubscription"),r=document.querySelector(".modal-backdrop-subscription"),f=document.querySelector("body"),p=document.body.style.overflow,m=e=>{const s=e.target;(s===d||s.closest(".close"))&&(d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=p),(s===l||s.closest(".close"))&&(l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=p),e.key==="Escape"&&g(),s===r&&g()},T=()=>{d.classList.add("visible-modal"),d.classList.remove("visually-hidden"),r.classList.remove("is-hidden"),document.addEventListener("keydown",m),f.style.overflow="hidden"},M=()=>{l.classList.add("visible-modal"),l.classList.remove("visually-hidden"),r.classList.remove("is-hidden"),document.addEventListener("keydown",m),f.style.overflow="hidden"},N=async e=>{const s={email:e};try{const t=await q(s);T(),v.reset()}catch(t){t.response.data.message==="Subscription already exists"?M():y()}};function x(e){e.preventDefault();const t=document.querySelector(".input-label").value.trim();N(t)}function g(){d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=p}v.addEventListener("submit",x);r.addEventListener("click",m);export{w as a,z as b,I as c,D as d,U as e,y as f,_ as g,j as h,R as i,K as j,A as k,B as l,H as m,F as n,J as o,u as s,C as u};
//# sourceMappingURL=modal-subscription-5d537d84.js.map
