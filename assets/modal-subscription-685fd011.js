import{S as L,a as r}from"./vendor-a81688c2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();const u="/Code-Storm/assets/sprite-f073391d.svg";function b(e,s){localStorage.setItem(e,JSON.stringify(s))}function B(e){const s=localStorage.getItem(e);try{return JSON.parse(s)}catch{return g(),s}}function k(e){const{keyword:s,category:t,page:c,limit:o,...n}=e,i=Object.keys(n).length,m=new URLSearchParams({page:c,limit:o});if(s&&m.set("keyword",s),t&&m.set("category",t),i){const[y,v]=Object.entries(n)[0];m.set(y,v)}return m}function C(e,s,t){const c=t.findIndex(o=>o._id===s._id);c!==-1?t.splice(c,1):t.push(s),b(e,t),w(t)}function w(e){const s=document.querySelector(".number-products"),t=e.length;s.textContent=t}function J(e){return e.replaceAll("_"," ")}function g(){L.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function U(){document.querySelector(".loader-container").classList.remove("is-hidden")}function j(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),300)}function A(e,s){return JSON.stringify(e)!==JSON.stringify(s)}function D(e,s,t){for(let c=0;c<e.length;c+=1)switch(!0){case e[c].classList.contains("main-products-btn"):S(e[c],s,t);break;case e[c].classList.contains("popular-products-btn"):O(e[c],s,t);break;case e[c].classList.contains("discount-products-btn"):I(e[c],s,t);break}}function S(e,s,t){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,n=t.some(({_id:i})=>i===s);e.innerHTML=n?c:o}function I(e,s,t){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,n=t.some(({_id:i})=>i===s);e.innerHTML=n?c:o}function O(e,s,t){const c=`<svg class="light-checkmark" width="12" height="12">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="light-basket" width="12" height="12">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,n=t.some(({_id:i})=>i===s);e.innerHTML=n?c:o}r.defaults.baseURL="https://food-boutique.b.goit.study/api";const H=async()=>{const{data:e}=await r.get("/products/categories");return e},_=async e=>{const s=k(e),{data:t}=await r.get("/products/",{params:s});return t},F=async e=>{const{data:s}=await r.get(`/products/${e}`);return s},R=async e=>{const{data:s}=await r.get(`/products/popular?limit=${e}`);return s},K=async()=>{const{data:e}=await r.get("/products/discount");return e},z=async e=>{const{data:s}=await r.post("/orders",e);return s},P=async e=>{const{data:s}=await r.post("/subscription",e);return s},E=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),l=document.querySelector(".modal-unsubscription"),a=document.querySelector(".modal-backdrop-subscription"),f=document.querySelector("body"),q=document.body.style.overflow,h=e=>{const s=e.target;(s===d||s.closest(".close"))&&(d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),a.classList.add("is-hidden")),(s===l||s.closest(".close"))&&(l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),a.classList.add("is-hidden")),e.key==="Escape"&&p(),s===a&&p()},T=()=>{d.classList.add("visible-modal"),d.classList.remove("visually-hidden"),a.classList.remove("is-hidden"),document.addEventListener("keydown",h),f.style.overflow="hidden"},M=()=>{l.classList.add("visible-modal"),l.classList.remove("visually-hidden"),a.classList.remove("is-hidden"),document.addEventListener("keydown",h),f.style.overflow="hidden"},N=async e=>{const s={email:e};try{const t=await P(s);T()}catch(t){t.response.data.message==="Subscription already exists"?M():g()}};function x(e){e.preventDefault();const t=document.querySelector(".input-label").value.trim();N(t)}function p(){d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),a.classList.add("is-hidden"),l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),a.classList.add("is-hidden"),document.removeEventListener("keydown",h),f.style.overflow=q}E.addEventListener("submit",x);a.addEventListener("click",h);export{b as a,z as b,w as c,D as d,U as e,g as f,_ as g,j as h,R as i,K as j,A as k,B as l,H as m,F as n,J as o,u as s,C as u};
//# sourceMappingURL=modal-subscription-685fd011.js.map
