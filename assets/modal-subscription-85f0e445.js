import{S as g,a}from"./vendor-a81688c2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const $="/Code-Storm/assets/sprite-f073391d.svg";function y(e,t){localStorage.setItem(e,JSON.stringify(t))}function x(e){const t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return h(),t}}function k(e){const{keyword:t,category:s,page:c,limit:o,...n}=e,r=Object.keys(n).length,u=new URLSearchParams({page:c,limit:o});if(t&&u.set("keyword",t),s&&u.set("category",s),r){const[f,p]=Object.entries(n)[0];u.set(f,p)}return u}function M(e,t,s){const c=s.findIndex(o=>o._id===t._id);c!==-1?s.splice(c,1):s.push(t),y(e,s),L(s)}function L(e){const t=document.querySelector(".number-products"),s=e.length;t.textContent=s}function T(e){return e.replaceAll("_"," ")}function h(){g.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function B(){document.querySelector(".loader-container").classList.remove("is-hidden")}function C(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),300)}function J(e,t){return JSON.stringify(e)!==JSON.stringify(t)}function U(e,t,s){for(let c=0;c<e.length;c+=1)switch(!0){case e[c].classList.contains("main-products-btn"):S(e[c],t,s);break;case e[c].classList.contains("popular-products-btn"):v(e[c],t,s);break;case e[c].classList.contains("discount-products-btn"):b(e[c],t,s);break}}function S(e,t,s){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${sprite}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${sprite}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}function b(e,t,s){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${sprite}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${sprite}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}function v(e,t,s){const c=`<svg class="light-checkmark" width="12" height="12">
            <use class="href-icon" href="${sprite}#icon-checkmark"></use>
          </svg>`,o=`<svg class="light-basket" width="12" height="12">
            <use class="href-icon" href="${sprite}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}a.defaults.baseURL="https://food-boutique.b.goit.study/api";const j=async()=>{const{data:e}=await a.get("/products/categories");return e},A=async e=>{const t=k(e),{data:s}=await a.get("/products/",{params:t});return s},D=async e=>{const{data:t}=await a.get(`/products/${e}`);return t},H=async e=>{const{data:t}=await a.get(`/products/popular?limit=${e}`);return t},_=async()=>{const{data:e}=await a.get("/products/discount");return e},F=async e=>{const{data:t}=await a.post("/orders",e);return t},w=async e=>{const{data:t}=await a.post("/subscription",e);return t},I=document.querySelector(".form-footer"),i=document.querySelector(".modal-subscription"),d=document.querySelector(".modal-unsubscription"),l=document.querySelector(".modal-backdrop-subscription");i.classList.add("is-hidden");d.classList.add("is-hidden");const m=e=>{const t=e.target;(t===i||t.closest(".close"))&&(i.classList.add("is-hidden"),l.classList.add("is-hidden")),(t===d||t.closest(".close"))&&(d.classList.add("is-hidden"),l.classList.add("is-hidden"))},P=()=>{i.classList.remove("is-hidden"),l.classList.remove("is-hidden")},O=()=>{d.classList.remove("is-hidden"),l.classList.remove("is-hidden")},q=async e=>{const t={email:e};try{const s=await w(t);P()}catch(s){s.response.data.message==="Subscription already exists"?O():h()}};function E(e){e.preventDefault();const s=document.querySelector(".input-label").value.trim();q(s)}I.addEventListener("submit",E);i.addEventListener("click",m);d.addEventListener("click",m);export{y as a,F as b,L as c,U as d,B as e,h as f,A as g,C as h,H as i,_ as j,J as k,x as l,j as m,D as n,T as o,$ as s,M as u};
//# sourceMappingURL=modal-subscription-85f0e445.js.map
