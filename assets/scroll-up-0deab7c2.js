import{S as x,a as i,l as E,b as I}from"./vendor-9038a9ee.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const u="/Code-Storm/assets/sprite-7f96c85e.svg";function C(e,s){localStorage.setItem(e,JSON.stringify(s))}function D(e){const s=localStorage.getItem(e);try{return JSON.parse(s)}catch{return L(),s}}function O(e){const{keyword:s,category:t,page:n,limit:o,...c}=e,a=Object.keys(c).length,p=new URLSearchParams({page:n,limit:o});if(s&&p.set("keyword",s),t&&p.set("category",t),a){const[w,S]=Object.entries(c)[0];p.set(w,S)}return p}function H(e,s,t){const n=t.findIndex(o=>o._id===s._id);n!==-1?t.splice(n,1):t.push(s),C(e,t),P(t)}function P(e){const s=document.querySelector(".number-products"),t=e.length;s.textContent=t}function _(e){return e.replaceAll("_"," ")}function L(){x.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function F(){document.querySelector(".loader-container").classList.remove("is-hidden")}function R(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),300)}function K(e,s){return JSON.stringify(e)!==JSON.stringify(s)}function Q(e,s,t){for(let n=0;n<e.length;n+=1)switch(!0){case e[n].classList.contains("main-products-btn"):$(e[n],s,t);break;case e[n].classList.contains("popular-products-btn"):T(e[n],s,t);break;case e[n].classList.contains("discount-products-btn"):q(e[n],s,t);break}}function $(e,s,t){const n=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:a})=>a===s);e.innerHTML=c?n:o}function q(e,s,t){const n=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:a})=>a===s);e.innerHTML=c?n:o}function T(e,s,t){const n=`<svg class="light-checkmark" width="12" height="12">
            <use class="href-icon" href="${u}#icon-checkmark"></use>
          </svg>`,o=`<svg class="light-basket" width="12" height="12">
            <use class="href-icon" href="${u}#icon-basket"></use>
          </svg>`,c=t.some(({_id:a})=>a===s);e.innerHTML=c?n:o}i.defaults.baseURL="https://food-boutique.b.goit.study/api";const g={maxAge:60*60*24*30},Y=async()=>{const{data:e}=await i.get("/products/categories",{headers:{"Cache-Control":`max-age=${g.maxAge}`}});return e},z=async e=>{const s=O(e),{data:t}=await i.get("/products/",{params:s,headers:{"Cache-Control":`max-age=${g.maxAge}`}});return t},G=async e=>{const{data:s}=await i.get(`/products/${e}`,{headers:{"Cache-Control":`max-age=${g.maxAge}`}});return s},V=async e=>{const{data:s}=await i.get(`/products/popular?limit=${e}`,{headers:{"Cache-Control":`max-age=${g.maxAge}`}});return s},W=async()=>{const{data:e}=await i.get("/products/discount",{headers:{"Cache-Control":`max-age=${g.maxAge}`}});return e},X=async e=>{const{data:s}=await i.post("/orders",e);return s},A=async e=>{const{data:s}=await i.post("/subscription",e);return s},b=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),l=document.querySelector(".modal-unsubscription"),r=document.querySelector(".modal-backdrop-subscription"),f=document.querySelector("body"),y=document.body.style.overflow,m=e=>{const s=e.target;(s===d||s.closest(".close"))&&(d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=y),(s===l||s.closest(".close"))&&(l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=y),e.key==="Escape"&&v(),s===r&&v()},M=()=>{d.classList.add("visible-modal"),d.classList.remove("visually-hidden"),r.classList.remove("is-hidden"),document.addEventListener("keydown",m),f.style.overflow="hidden"},N=()=>{l.classList.add("visible-modal"),l.classList.remove("visually-hidden"),r.classList.remove("is-hidden"),document.addEventListener("keydown",m),f.style.overflow="hidden"},B=async e=>{const s={email:e};try{const t=await A(s);M(),b.reset()}catch(t){t.response.data.message==="Subscription already exists"?N():L()}};function J(e){e.preventDefault();const t=document.querySelector(".input-label").value.trim();B(t)}function v(){d.classList.remove("visible-modal"),setTimeout(()=>d.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),l.classList.remove("visible-modal"),setTimeout(()=>l.classList.add("visually-hidden"),500),r.classList.add("is-hidden"),document.removeEventListener("keydown",m),f.style.overflow=y}b.addEventListener("submit",J);r.addEventListener("click",m);const h=document.querySelector(".scroll-up-btn");window.addEventListener("scroll",E.throttle(k,300));h.addEventListener("click",U);function k(){window.scrollY>300?(h.classList.remove("is-hidden"),h.classList.add("scroll-visible")):(h.classList.add("is-hidden"),h.classList.remove("scroll-visible"))}function U(){I({targets:document.scrollingElement||document.documentElement,scrollTop:0,duration:1e3,easing:"easeInOutQuad"})}k();export{C as a,X as b,P as c,L as d,Q as e,F as f,z as g,R as h,V as i,W as j,K as k,D as l,Y as m,G as n,_ as o,u as s,H as u};
//# sourceMappingURL=scroll-up-0deab7c2.js.map
