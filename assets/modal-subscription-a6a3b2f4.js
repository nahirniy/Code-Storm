import{S as g,a as r}from"./vendor-a81688c2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const N="/Code-Storm/assets/sprite-f073391d.svg";function h(t,e){localStorage.setItem(t,JSON.stringify(e))}function k(t){const e=localStorage.getItem(t);try{return JSON.parse(e)}catch{return m(),e}}function S(t){const{keyword:e,category:s,page:c,limit:o,...n}=t,a=Object.keys(n).length,u=new URLSearchParams({page:c,limit:o});if(e&&u.set("keyword",e),s&&u.set("category",s),a){const[p,y]=Object.entries(n)[0];u.set(p,y)}return u}function x(t,e,s){const c=s.findIndex(o=>o._id===e._id);c!==-1?s.splice(c,1):s.push(e),h(t,s),L(s)}function L(t){const e=document.querySelector(".number-products"),s=t.length;e.textContent=s}function I(t){return t.replaceAll("_"," ")}function m(){g.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function B(){document.querySelector(".loader-container").classList.remove("is-hidden")}function C(){const t=document.querySelector(".loader-container");setTimeout(()=>t.classList.add("is-hidden"),300)}function J(t,e){return JSON.stringify(t)!==JSON.stringify(e)}r.defaults.baseURL="https://food-boutique.b.goit.study/api";const M=async()=>{const{data:t}=await r.get("/products/categories");return t},U=async t=>{const e=S(t),{data:s}=await r.get("/products/",{params:e});return s},j=async t=>{const{data:e}=await r.get(`/products/${t}`);return e},T=async t=>{const{data:e}=await r.get(`/products/popular?limit=${t}`);return e},_=async()=>{const{data:t}=await r.get("/products/discount");return t},A=async t=>{const{data:e}=await r.post("/orders",t);return e},b=async t=>{const{data:e}=await r.post("/subscription",t);return e},w=document.querySelector(".form-footer"),i=document.querySelector(".modal-subscription"),d=document.querySelector(".modal-unsubscription"),l=document.querySelector(".modal-backdrop-subscription");i.classList.add("is-hidden");d.classList.add("is-hidden");const f=t=>{const e=t.target;(e===i||e.closest(".close"))&&(i.classList.add("is-hidden"),l.classList.add("is-hidden")),(e===d||e.closest(".close"))&&(d.classList.add("is-hidden"),l.classList.add("is-hidden"))},v=()=>{i.classList.remove("is-hidden"),l.classList.remove("is-hidden")},O=()=>{d.classList.remove("is-hidden"),l.classList.remove("is-hidden")},P=async t=>{const e={email:t};try{const s=await b(e);v()}catch(s){s.response.data.message==="Subscription already exists"?O():m()}};function q(t){t.preventDefault();const s=document.querySelector(".input-label").value.trim();P(s)}w.addEventListener("submit",q);i.addEventListener("click",f);d.addEventListener("click",f);export{h as a,A as b,_ as c,L as d,B as e,U as f,T as g,m as h,C as i,J as j,M as k,k as l,j as m,I as n,N as s,x as u};
//# sourceMappingURL=modal-subscription-a6a3b2f4.js.map
