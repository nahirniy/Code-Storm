import{S as y,a}from"./vendor-a81688c2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const i="/Code-Storm/assets/sprite-f073391d.svg";function k(e,t){localStorage.setItem(e,JSON.stringify(t))}function M(e){const t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return m(),t}}function L(e){const{keyword:t,category:s,page:c,limit:o,...n}=e,r=Object.keys(n).length,l=new URLSearchParams({page:c,limit:o});if(t&&l.set("keyword",t),s&&l.set("category",s),r){const[g,p]=Object.entries(n)[0];l.set(g,p)}return l}function $(e,t,s){const c=s.findIndex(o=>o._id===t._id);c!==-1?s.splice(c,1):s.push(t),k(e,s),S(s)}function S(e){const t=document.querySelector(".number-products"),s=e.length;t.textContent=s}function T(e){return e.replaceAll("_"," ")}function m(){y.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}function B(){document.querySelector(".loader-container").classList.remove("is-hidden")}function C(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),300)}function J(e,t){return JSON.stringify(e)!==JSON.stringify(t)}function U(e,t,s){for(let c=0;c<e.length;c+=1)switch(!0){case e[c].classList.contains("main-products-btn"):b(e[c],t,s);break;case e[c].classList.contains("popular-products-btn"):w(e[c],t,s);break;case e[c].classList.contains("discount-products-btn"):v(e[c],t,s);break}}function b(e,t,s){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${i}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${i}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}function v(e,t,s){const c=`<svg class="svg-checkmark" width="18" height="18">
            <use class="href-icon" href="${i}#icon-checkmark"></use>
          </svg>`,o=`<svg class="svg-basket" width="18" height="18">
            <use class="href-icon" href="${i}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}function w(e,t,s){const c=`<svg class="light-checkmark" width="12" height="12">
            <use class="href-icon" href="${i}#icon-checkmark"></use>
          </svg>`,o=`<svg class="light-basket" width="12" height="12">
            <use class="href-icon" href="${i}#icon-basket"></use>
          </svg>`,n=s.some(({_id:r})=>r===t);e.innerHTML=n?c:o}a.defaults.baseURL="https://food-boutique.b.goit.study/api";const j=async()=>{const{data:e}=await a.get("/products/categories");return e},A=async e=>{const t=L(e),{data:s}=await a.get("/products/",{params:t});return s},D=async e=>{const{data:t}=await a.get(`/products/${e}`);return t},H=async e=>{const{data:t}=await a.get(`/products/popular?limit=${e}`);return t},_=async()=>{const{data:e}=await a.get("/products/discount");return e},F=async e=>{const{data:t}=await a.post("/orders",e);return t},I=async e=>{const{data:t}=await a.post("/subscription",e);return t},P=document.querySelector(".form-footer"),d=document.querySelector(".modal-subscription"),u=document.querySelector(".modal-unsubscription"),h=document.querySelector(".modal-backdrop-subscription");d.classList.add("is-hidden");u.classList.add("is-hidden");const f=e=>{const t=e.target;(t===d||t.closest(".close"))&&(d.classList.add("is-hidden"),h.classList.add("is-hidden")),(t===u||t.closest(".close"))&&(u.classList.add("is-hidden"),h.classList.add("is-hidden"))},O=()=>{d.classList.remove("is-hidden"),h.classList.remove("is-hidden")},q=()=>{u.classList.remove("is-hidden"),h.classList.remove("is-hidden")},E=async e=>{const t={email:e};try{const s=await I(t);O()}catch(s){s.response.data.message==="Subscription already exists"?q():m()}};function N(e){e.preventDefault();const s=document.querySelector(".input-label").value.trim();E(s)}P.addEventListener("submit",N);d.addEventListener("click",f);u.addEventListener("click",f);export{k as a,F as b,S as c,U as d,B as e,m as f,A as g,C as h,H as i,_ as j,J as k,M as l,j as m,D as n,T as o,i as s,$ as u};
//# sourceMappingURL=modal-subscription-18dd979e.js.map
