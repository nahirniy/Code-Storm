{"version":3,"file":"commonHelpers2.js","sources":["../src/js/services/food-api.js","../src/js/home-content/main-products/markup-main-product.js","../src/js/home-content/main-products/main-products.js","../src/js/home-content/popular-products/markup-popular-products.js","../src/js/home-content/popular-products/popular-products.js"],"sourcesContent":["// ТУТ ПИШЕ ТІЛЬКИ МАКС\nimport axios from 'axios';\nimport { createParams } from './helpers';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n  const { data } = await axios.get(`/products/categories`);\n\n  return data;\n};\n\nexport const getCurrentProducts = async parameters => {\n  const params = createParams(parameters);\n\n  const { data } = await axios.get(`/products/`, { params });\n\n  return data;\n};\n\nexport const getProductById = async id => {\n  const { data } = await axios.get(`/products/${id}`);\n\n  return data;\n};\n\nexport const getPopularProducts = async limit => {\n  const { data } = await axios.get(`/products/popular?limit=${limit}`);\n\n  return data;\n};\n\nexport const getDiscountProducts = async () => {\n  const { data } = await axios.get(`/products/discount`);\n\n  return data;\n};\n\nexport const addOrder = async body => {\n  const { data } = await axios.post(`/orders`, body);\n\n  return data;\n};\n\nexport const addEmail = async body => {\n  const { data } = await axios.post(`/subscription`, body);\n\n  return data;\n};\n","import sprite from '../../../img/icons/sprite.svg';\n\nconst productList = document.querySelector('.product-list');\n\n/*--------------------------------CHECK IF ARRAY IS CLEAR----------------------------*/\nexport function markupInfoMainProduct() {\n  return `<div class=\"info-query\">\n                <h3 class=\"info-text\">Nothing was found for the selected <span class=\"info-word\">filters...</span></h3>\n                <p class=\"info-message\">Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.</p>\n              </div>`;\n}\n\n/*-----------------------------------MARKUP----------------------------*/\nexport function mainProductMarkup({ results }) {\n  const markup = results\n    .map(item => {\n      let formattedCategory = removeUnderscore(item.category);\n\n      return `<li class=\"resp-item\">\n        <a class=\"img-link\" href=\"${item.img}\">\n          <img class=\"photo\" src=\"${item.img}\" alt=\"${item.name}\" loading=\"lazy\"/>\n        </a>\n        <h2 class=\"name-product\">${item.name}</h2>\n        <div class=\"descr-product\">\n          <p class=\"category-product\"><span class=\"style-word\">Category:</span>${formattedCategory}</p>\n          <p class=\"size-product\"><span class=\"style-word\">Size:</span>${item.size}</p>\n          <p class=\"popular-product\"><span class=\"style-word\">Popularity:</span>${item.popularity}</p>\n        </div>\n        <div class=\"footer-product_card\">\n          <p class=\"price-product\">$${item.price}</p>\n          <svg class=\"svg-basket\" width=\"34\" height=\"34\">\n            <use class=\"href-icon\" href=\"${sprite}#icon-basket\"></use>\n          </svg>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  productList.innerHTML = markup;\n}\nfunction removeUnderscore(text) {\n  return text.replace(/_/g, ' ');\n}\n","import { getCurrentProducts } from '../../services/food-api';\nimport {\n  markupInfoMainProduct,\n  mainProductMarkup,\n} from './markup-main-product';\n\nconst inputWord = document.querySelector('input');\nconst btnSubmit = document.querySelector('.btn-submit');\nconst productList = document.querySelector('.product-list');\nconst productItem = document.querySelector('.photo-card');\nlet searchWord = '';\nlet page = 1;\nlet limit = 6;\nlet totalPages = 0;\n\n/*-------------------------CHECK LIMIT(WIDTH SCRENN--------------------*/\n\nfunction addClickEventIfInRange() {\n  let rezice = window.innerWidth;\n\n  if (rezice <= 375) {\n    limit = 6;\n  } else if (rezice >= 375 && rezice <= 768) {\n    limit = 8;\n  } else {\n    limit = 9;\n  }\n}\n\naddClickEventIfInRange();\n\nwindow.addEventListener('resize', function (event) {\n  addClickEventIfInRange();\n});\n/*-----------------------------QUERY DATA WITH EVENT SUBMIT---------------------------*/\n// btnSubmit.addEventListener('click', handleClick);\n\nasync function handleClick(event) {\n  event.preventDefault();\n  searchWord = inputWord.value.trim();\n\n  try {\n    const searchObjects = await getCurrentProducts({\n      keyword: null,\n      category: null,\n      page: 1,\n      limit: limit,\n      byABC: false,\n    });\n    let results = searchObjects.results;\n    let arrayLength = results.length;\n    totalPages = searchObjects.totalPages;\n\n    if (arrayLength > 0) {\n      productItem.innerHTML = '';\n      productItem.insertAdjacentHTML('beforeend', mainProductMarkup(results));\n      const basketIcons = document.querySelectorAll('.svg-basket');\n      basketIcons.forEach(icon => {\n        icon.addEventListener('click', handleClickBasket);\n      });\n    } else {\n      productItem.innerHTML = '';\n      const infoMessage = markupInfoMainProduct();\n      productItem.insertAdjacentHTML('beforeend', infoMessage);\n    }\n    clickIconBasket();\n  } catch (error) {\n    console.error(error);\n  }\n}\n/*---------------ADD EVENT FOR ALL ICONS---------------------*/\nfunction clickIconBasket() {\n  const basketIcons = document.querySelectorAll('.svg-basket');\n  basketIcons.forEach(icon => {\n    icon.addEventListener('click', handleClickBasket);\n  });\n}\n\n/*---------------------HANDLE CLICK BASKET--------------------*/\nfunction handleClickBasket(event) {\n  const clickedItem = event.currentTarget.closest('.resp-item');\n  if (clickedItem) {\n    const itemName = clickedItem.querySelector('.name-product').textContent;\n    const itemPrice = clickedItem.querySelector('.price-product').textContent;\n    const basketItem = { name: itemName, price: itemPrice };\n    localStorage.setItem(itemName, JSON.stringify(basketItem));\n\n    const basketIcon = clickedItem.querySelector('.href-icon');\n    if (basketIcon) {\n      basketIcon.setAttribute('href', `${sprite}#icon-checkmark`);\n    }\n  }\n}\n","const refs = {\n  popularList: document.querySelector('.popular-list'),\n};\n\nexport default function markupPopularList(arr) {\n  const cards = arr.map(({ name, img, category, size, popularity, _id }) => {\n    return `<li class=\"popular-item\" data-id=\"${_id}\">\n                    <div class=\"wrapper-img\">\n                        <img\n                            src=\"${img}\"\n                            alt=\"${name}\"\n                        />\n                    </div>\n                    <div class=\"popular-product-info\">\n                        <h3 class=\"product-name\">${name}</h3>\n                        <p class=\"product-category\">Category: <span>${category.replace(\n                          '_',\n                          ' '\n                        )}</span></p>\n                        <div class=\"product-text\">\n                            <p>Size: <span>${size}</span></p>\n                            <p>Popularity: <span>${popularity}</span></p>\n                        </div>\n                    </div>\n                </li>`;\n  });\n\n  refs.popularList.insertAdjacentHTML('beforeend', cards.join(''));\n}\n","import { getPopularProducts } from '../../services/food-api';\nimport markupPopularList from './markup-popular-products';\n\nconst limitPopularProduct = 5;\n\ngetPopularProducts(limitPopularProduct).then(data => markupPopularList(data));\n"],"names":["axios","getPopularProducts","limit","data","event","refs","markupPopularList","arr","cards","name","img","category","size","popularity","_id","limitPopularProduct"],"mappings":"oFAIAA,EAAM,SAAS,QAAU,yCAsBlB,MAAMC,EAAqB,MAAMC,GAAS,CAC/C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMH,EAAM,IAAI,2BAA2BE,GAAO,EAEnE,OAAOC,CACT,EC5BoB,SAAS,cAAc,eAAe,ECIxC,SAAS,cAAc,OAAO,EAC9B,SAAS,cAAc,aAAa,EAClC,SAAS,cAAc,eAAe,EACtC,SAAS,cAAc,aAAa,EAsBxD,OAAO,iBAAiB,SAAU,SAAUC,EAAO,CAEnD,CAAC,ECjCD,MAAMC,EAAO,CACX,YAAa,SAAS,cAAc,eAAe,CACrD,EAEe,SAASC,EAAkBC,EAAK,CAC7C,MAAMC,EAAQD,EAAI,IAAI,CAAC,CAAE,KAAAE,EAAM,IAAAC,EAAK,SAAAC,EAAU,KAAAC,EAAM,WAAAC,EAAY,IAAAC,CAAG,IAC1D,qCAAqCA;AAAA;AAAA;AAAA,mCAGbJ;AAAA,mCACAD;AAAA;AAAA;AAAA;AAAA,mDAIgBA;AAAA,sEACmBE,EAAS,QACrD,IACA,GAC1B;AAAA;AAAA,6CAE6CC;AAAA,mDACMC;AAAA;AAAA;AAAA,sBAIhD,EAEDR,EAAK,YAAY,mBAAmB,YAAaG,EAAM,KAAK,EAAE,CAAC,CACjE,CCzBA,MAAMO,EAAsB,EAE5Bd,EAAmBc,CAAmB,EAAE,KAAKZ,GAAQG,EAAkBH,CAAI,CAAC"}