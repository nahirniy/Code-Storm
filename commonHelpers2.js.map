{"version":3,"file":"commonHelpers2.js","sources":["../src/js/home-content/main-products/main-products.js","../src/js/home-content/main-products/markup-main-product.js","../src/js/home-content/main-products/pagination.js","../src/js/home-content/popular-products/markup-popular-products.js","../src/js/home-content/popular-products/popular-products.js","../src/js/home-content/discount-products/markup-discount-products.js","../src/js/home-content/discount-products/discount-products.js","../src/js/filters/filters-request.js","../src/js/filters/filters-style.js","../src/js/filters/filters.js","../src/js/modals/modal-product/modal-product.js"],"sourcesContent":["import {\n  counterProducts,\n  loadFromLS,\n  updateAllIcon,\n  updateBasket,\n} from '../../services/helpers';\n\nconst LOCALSTORAGE_KEY = 'basket';\nconst productMainList = document.querySelector('.product-list');\nconst basket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\n\nasync function handleClickBasket(event) {\n  const newBasket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\n  const clickedItem = event.target.closest('.btn-basket');\n  if (!clickedItem) {\n    return;\n  }\n\n  const id = event.target.closest('.resp-item').dataset.id;\n  const currentProducts = loadFromLS('main products');\n  const someProduct = currentProducts.filter(({ _id }) => id === _id)[0];\n  const currentButton = document.querySelectorAll(`[data-button-id=\"${id}\"]`);\n\n  updateBasket(LOCALSTORAGE_KEY, someProduct, newBasket);\n  updateAllIcon([...currentButton], id, newBasket);\n}\n\ncounterProducts(basket);\n\nproductMainList.addEventListener('click', handleClickBasket);\n","import { loadFromLS, saveToLS } from '../../services/helpers';\nimport sprite from '../../../img/icons/sprite.svg';\n\nconst productMainList = document.querySelector('.product-list');\nconst LOCALSTORAGE_KEY = 'main products';\n\n/*-----------------------------------MARKUP----------------------------*/\n\nexport function mainProductMarkup(mainProduct) {\n  saveToLS(LOCALSTORAGE_KEY, mainProduct);\n  const basket = loadFromLS('basket') ?? [];\n\n  const markup = mainProduct\n    .map(item => {\n      const formattedCategory = removeUnderscore(item.category);\n      const formatPrice = formatNumber(item.price);\n      const inStorage = basket.find(({ _id }) => _id === item._id);\n\n      return `<li class=\"resp-item\" data-id=\"${item._id}\">\n      ${\n        item.is10PercentOff\n          ? `<svg class=\"svg-discount animation-icon\" width=\"60\" height=\"60\">\n          <use href=\"${sprite}#icon-discount-mark\"></use>\n        </svg>\n          `\n          : ''\n      }\n        <div class=\"img\" >\n          <img class=\"photo\" src=\"${item.img}\" alt=\"${\n        item.name\n      }\" width=\"140\" height=\"140\" loading=\"lazy\"/>\n        </div>\n        <h4 class=\"name-product\">${item.name}</h4>\n        <div class=\"descr-product\">\n          <p class=\"category-product\"><span class=\"style-word\">Category:</span>${formattedCategory}</p>\n          <p class=\"size-product\"><span class=\"style-word\">Size:</span>${\n            item.size\n          }</p>\n          <p class=\"popular-product\"><span class=\"style-word\">Popularity:</span>${\n            item.popularity\n          }</p>\n        </div>\n        <div class=\"footer-product_card\">\n          <p class=\"price-product\">$${formatPrice}</p>\n          <button \n            type=\"button\" \n            class=\"btn-basket main-products-btn\" \n            data-button-id=\"${item._id}\"\n            aria-label=\"Add or remove product from basket\"  \n          >\n          ${\n            inStorage\n              ? `<svg class=\"svg-checkmark\" width=\"18\" height=\"18\">\n            <use class=\"href-icon\" href=\"${sprite}#icon-checkmark\"></use>\n          </svg>`\n              : `<svg class=\"svg-basket\" width=\"18\" height=\"18\">\n            <use class=\"href-icon\" href=\"${sprite}#icon-basket\"></use>\n          </svg>`\n          }\n          </button>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  productMainList.innerHTML = markup;\n}\nfunction removeUnderscore(text) {\n  return text.replace(/_/g, ' ');\n}\nfunction formatNumber(number) {\n  if (Number.isInteger(number)) {\n    return `${number}.00`;\n  } else {\n    return number.toFixed(2);\n  }\n}\n","import { getCurrentProducts } from '../../services/food-api';\nimport { mainProductMarkup } from './markup-main-product';\nimport {\n  checkedParams,\n  hideLoader,\n  loadFromLS,\n  saveToLS,\n  showError,\n  showLoader,\n} from '../../services/helpers';\n\nconst LOCALSTORAGE_KEY = 'params of search';\nconst pagination = document.querySelector('.pagination');\nconst paginationBtnWrap = document.querySelector('.pagination-btn-wrap');\nconst emptyContent = document.querySelector('.info-query');\nconst productMainList = document.querySelector('.product-list');\nconst prevPage = document.querySelector('[data-page=\"prev-page\"]');\nconst nextPage = document.querySelector('[data-page=\"next-page\"]');\n\nlet totalPages;\nlet page = 1;\nlet previousPage = 1;\n\nexport function createPagination(allPages, page = 1) {\n  let markup = '';\n  let beforePage = page;\n  let afterPage = page;\n  let sizeScreen = window.innerWidth;\n\n  totalPages = allPages;\n\n  nextPage.classList.remove('disabled');\n  prevPage.classList.remove('disabled');\n\n  if (sizeScreen >= 768) {\n    beforePage -= 1;\n    afterPage += 1;\n\n    if (page > 2) {\n      markup += `<button \n        type=\"button\"\n        class=\"number pagination-item\"\n        data-page=\"1\"\n        aria-label=\"This is 1 page\">\n        1\n      </button>`;\n\n      if (page > 3) {\n        markup += `<span class=\"dots\">...</span>`;\n      }\n    }\n  } else {\n    if (page > 2) {\n      markup += `<button \n        type=\"button\"\n        class=\"number pagination-item\"\n        data-page=\"1\"\n        aria-label=\"This is 1 page\">\n        1\n      </button>`;\n      markup += `<span class=\"dots\">...</span>`;\n    }\n  }\n\n  if (page === totalPages) {\n    beforePage = beforePage - 1;\n\n    nextPage.classList.add('disabled');\n  } else if (page === totalPages - 1) {\n    beforePage = beforePage - 1;\n  }\n\n  if (page === 1) {\n    afterPage = afterPage + 1;\n\n    prevPage.classList.add('disabled');\n  } else if (page === 2) {\n    afterPage = afterPage + 1;\n  }\n\n  for (let plength = beforePage; plength <= afterPage; plength += 1) {\n    if (plength > totalPages || plength < 0) {\n      continue;\n    }\n\n    if (plength === 0) {\n      plength += 1;\n    }\n\n    if (sizeScreen >= 768) {\n      if (totalPages === 4) {\n        if (page === 3) {\n          if (plength === 1) {\n            continue;\n          }\n        } else if (page === 2) {\n          if (plength === 4) {\n            continue;\n          }\n        }\n      } else if (totalPages === 3) {\n        if (page === 3) {\n          if (plength === 1) {\n            continue;\n          }\n        } else if (page === 1) {\n          if (plength === 3) {\n            continue;\n          }\n        }\n      }\n    }\n\n    markup += `<button \n      type=\"button\" \n      class=\"number pagination-item ${page === plength ? 'active-page' : ''}\"\n      data-page=\"${plength}\"\n      aria-label=\"This is ${plength} page\"\n      >${plength}\n    </button>`;\n  }\n\n  if (sizeScreen >= 768) {\n    if (page < totalPages - 1) {\n      if (page < totalPages - 2) {\n        markup += `<span class=\"dots\"><span>...</span></span>`;\n      }\n      markup += `<button \n      type=\"button\"\n        class=\"number pagination-item\"\n        data-page=\"${totalPages}\" \n        aria-label=\"This is ${totalPages} page\">\n        ${totalPages}\n      </button>`;\n    }\n  } else {\n    if (page < totalPages - 1) {\n      markup += `<span class=\"dots\"><span>...</span></span>`;\n      markup += `<button \n      type=\"button\"\n      class=\"number pagination-item\"\n      data-page=\"${totalPages}\">\n      ${totalPages}\n    </button>`;\n    }\n  }\n\n  paginationBtnWrap.innerHTML = markup;\n  return markup;\n}\n\nfunction changePage(e) {\n  const isBtn = e.target.closest('button');\n  if (!isBtn) {\n    return;\n  }\n\n  const currentPage = isBtn.dataset.page;\n\n  if (currentPage === 'next-page') {\n    page += 1;\n  } else if (currentPage === 'prev-page') {\n    page -= 1;\n  } else {\n    page = Number(currentPage);\n  }\n\n  if (previousPage === page) {\n    return;\n  }\n\n  createPage(page);\n  createPagination(totalPages, page);\n  previousPage = page;\n}\n\nasync function createPage(newPage) {\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  const newParams = { ...oldParams, page: newPage };\n\n  try {\n    showLoader();\n\n    const { results } = await getCurrentProducts(newParams);\n\n    mainProductMarkup(results);\n  } catch {\n    emptyContent.classList.remove('visually-hidden');\n    pagination.classList.add('visually-hidden');\n    productMainList.innerHTML = '';\n    showError();\n  } finally {\n    hideLoader();\n  }\n}\n\npagination.addEventListener('click', changePage);\n","import sprite from '../../../img/icons/sprite.svg';\nimport { loadFromLS } from '../../services/helpers';\n\nconst refs = {\n  popularList: document.querySelector('.popular-list'),\n};\n\nconst basket = loadFromLS('basket') ?? [];\n\nexport default function markupPopularList(arr) {\n  const cards = arr.map(({ name, img, category, size, popularity, _id }) => {\n    const inStorage = basket.some(product => product._id === _id);\n\n    return `<li class=\"popular-item\" data-id=\"${_id}\">\n                    <div class=\"wrapper-img\">\n                        <img\n                            src=\"${img}\"\n                            alt=\"${name}\"\n                            width=\"56\"\n                            height=\"56\" \n                            loading=\"lazy\"\n                        />\n                    </div>\n                    <div class=\"popular-product-info\">\n                    <div class=\"popular-info-top\">\n                        <h4 class=\"product-name\">${name}</h4>\n                        <button type=\"button\" \n                          class=\"btn-light-basket popular-products-btn\"\n                          data-button-id=\"${_id}\"\n                          aria-label=\"Add or remove product from basket\">\n                        ${\n                          inStorage\n                            ? `<svg class=\"light-checkmark\" width=\"12\" height=\"12\">\n                                  <use class=\"href-icon\" href=\"${sprite}#icon-checkmark\"></use>\n                               </svg>`\n                            : `<svg class=\"light-basket\" width=\"12\" height=\"12\">\n                                 <use href=\"${sprite}#icon-basket\"></use>\n                              </svg>`\n                        }\n                        </button>\n                        </div>\n                        <p class=\"product-category\">Category: <span>${category.replace(\n                          '_',\n                          ' '\n                        )}</span></p>\n                        <div class=\"product-text\">\n                            <p>Size: <span>${size}</span></p>\n                            <p>Popularity: <span>${popularity}</span></p>\n                        </div>\n                    </div>\n                </li>`;\n  });\n\n  refs.popularList.insertAdjacentHTML('beforeend', cards.join(''));\n}\n","import { getPopularProducts } from '../../services/food-api';\nimport markupPopularList from './markup-popular-products';\nimport {\n  loadFromLS,\n  updateBasket,\n  saveToLS,\n  updateAllIcon,\n} from '../../services/helpers';\n\nconst limitPopularProduct = 5;\n\ngetPopularProducts(limitPopularProduct)\n  .then(data => {\n    markupPopularList(data);\n    saveToLS('popular products', data);\n  })\n  .catch(err => console.log(err));\n\nconst refs = {\n  popularList: document.querySelector('.popular-list'),\n};\n\nasync function handleClickBasket(event) {\n  const LOCALSTORAGE_KEY = 'basket';\n  const basket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\n  const clickedItem = event.target.closest('.btn-light-basket');\n  if (!clickedItem) {\n    return;\n  }\n  const id = event.target.closest('.popular-item').dataset.id;\n  const currentProducts = loadFromLS('popular products');\n  const someProduct = currentProducts.filter(({ _id }) => id === _id)[0];\n  const currentButton = document.querySelectorAll(`[data-button-id=\"${id}\"]`);\n\n  updateBasket(LOCALSTORAGE_KEY, someProduct, basket);\n  updateAllIcon([...currentButton], id, basket);\n}\n\nrefs.popularList.addEventListener('click', handleClickBasket);\n","import sprite from '../../../img/icons/sprite.svg';\nimport { loadFromLS } from '../../services/helpers';\n\nconst refs = {\n  discountList: document.querySelector('.discount-list'),\n};\nconst basket = loadFromLS('basket') ?? [];\n\nexport default function markupDiscountList(arr) {\n  const cards = arr.map(({ name, img, _id, price }) => {\n    const inStorage = basket.some(product => product._id === _id);\n\n    return `<li class=\"discount-item\" data-id=\"${_id}\">\n        <svg class=\"svg-discount animation-icon\" width=\"60\" height=\"60\">\n          <use href=\"${sprite}#icon-discount-mark\"></use>\n        </svg>\n        <div class=\"wrap-img\">\n          <img\n            src=\"${img}\"\n            alt=\"${name}\"\n            loading=\"lazy\"\n          />\n        </div>\n        <div class=\"discount-product-info\">\n          <h4 class=\"product-name\">${name}</h4>\n          <p class=\"product-price\">$${price}</p>\n          <button type=\"button\"\n            class=\"btn-basket discount-products-btn\"\n            data-button-id=\"${_id}\" \n            aria-label=\"Add or remove product from basket\">\n          ${\n            inStorage\n              ? `<svg class=\"svg-checkmark\" width=\"18\" height=\"18\">\n              <use class=\"href-icon\" href=\"${sprite}#icon-checkmark\"></use>\n            </svg>`\n              : `<svg class=\"svg-basket\" width=\"18\" height=\"18\">\n              <use class=\"href-icon\" href=\"${sprite}#icon-basket\"></use>\n            </svg>`\n          }\n          </button>\n        </div>\n      </li>`;\n  });\n\n  refs.discountList.insertAdjacentHTML('beforeend', cards.join(''));\n}\n","import { getDiscountProducts } from '../../services/food-api';\nimport markupDiscountList from './markup-discount-products';\nimport {\n  loadFromLS,\n  updateBasket,\n  saveToLS,\n  updateAllIcon,\n} from '../../services/helpers';\n\ngetDiscountProducts().then(data => {\n  markupDiscountList(data);\n  saveToLS('discount products', data);\n});\n\nconst refs = {\n  discountList: document.querySelector('.discount-list'),\n};\n\nrefs.discountList.addEventListener('click', handleClickBasket);\n\nasync function handleClickBasket(event) {\n  const LOCALSTORAGE_KEY = 'basket';\n  const basket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\n  const clickedItem = event.target.closest('.btn-basket');\n  if (!clickedItem) {\n    return;\n  }\n\n  const id = event.target.closest('.discount-item').dataset.id;\n  const currentProducts = loadFromLS('discount products');\n  const someProduct = currentProducts.filter(({ _id }) => id === _id)[0];\n  const currentButton = document.querySelectorAll(`[data-button-id=\"${id}\"]`);\n\n  updateBasket(LOCALSTORAGE_KEY, someProduct, basket);\n  updateAllIcon([...currentButton], id, basket);\n}\n","import { getCurrentProducts } from '../services/food-api';\nimport {\n  checkedParams,\n  hideLoader,\n  loadFromLS,\n  saveToLS,\n  showError,\n  showLoader,\n} from '../services/helpers';\nimport { mainProductMarkup } from '../home-content/main-products/markup-main-product';\nimport { emptyContent, unsuccessSearch } from './filters';\nimport { createPagination } from '../home-content/main-products/pagination';\n\nconst pagination = document.querySelector('.pagination');\nconst paginationBtnWrap = document.querySelector('.pagination-btn-wrap');\nconst LOCALSTORAGE_KEY = 'params of search';\nlet newParams = loadFromLS(LOCALSTORAGE_KEY);\n\n// Проверяем и записываем выбранную категорию в лок. хранилище.\n\nexport async function changeCategory(e) {\n  if (!e.target.classList.contains('category-type')) {\n    return;\n  }\n\n  const currentCategory = e.target.dataset.category;\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n\n  if (currentCategory !== 'show-all') {\n    newParams = { ...oldParams, category: currentCategory };\n  } else {\n    newParams = { ...oldParams, category: null };\n  }\n\n  const isChangeParams = checkedParams(oldParams, newParams);\n\n  if (!isChangeParams) {\n    return;\n  }\n\n  try {\n    showLoader();\n\n    const { results, totalPages } = await getCurrentProducts(newParams);\n    updateMarkup(results, totalPages);\n\n    saveToLS(LOCALSTORAGE_KEY, newParams);\n  } catch (err) {\n    unsuccessSearch();\n    showError();\n  } finally {\n    hideLoader();\n  }\n}\n\n// Записываем велью с инпуты(строки ввода в параметры локал)\nexport function changeKeyword(e) {\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  const saveKeyword = { ...oldParams, keyword: e.target.value };\n  saveToLS(LOCALSTORAGE_KEY, saveKeyword);\n}\n\n// По нажатию кнопки создаем разметку по данным с хранилища.\nexport async function formSub(e) {\n  e.preventDefault();\n\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  const isChangeParams = checkedParams(oldParams, newParams);\n\n  newParams = oldParams;\n\n  if (!isChangeParams) {\n    return;\n  }\n\n  try {\n    showLoader();\n\n    const { results, totalPages } = await getCurrentProducts(newParams);\n    updateMarkup(results, totalPages);\n  } catch {\n    unsuccessSearch();\n    showError();\n  } finally {\n    hideLoader();\n  }\n}\n\n// Определяем фильтр параметров поиска и отрисовуем\nexport function getFilter(e) {\n  let filter;\n  let state;\n  let args = e.target.dataset.filterparam;\n  switch (args) {\n    case 'byAtoZ':\n      filter = 'byABC';\n      state = true;\n      break;\n    case 'byZtoA':\n      filter = 'byABC';\n      state = false;\n      break;\n    case 'byCheaperfirst':\n      filter = 'byPrice';\n      state = true;\n      break;\n    case 'byExpensivefirst':\n      filter = 'byPrice';\n      state = false;\n      break;\n    case 'byPopular':\n      filter = 'byPopularity';\n      state = false;\n      break;\n    case 'byNotpopular':\n      filter = 'byPopularity';\n      state = true;\n      break;\n    default:\n      filter = 'byABC';\n      state = true;\n      break;\n  }\n\n  changeFilter(e, filter, state);\n}\n\n// Проверка и отрисовка параметров поиска\nasync function changeFilter(e, filter, state) {\n  if (!e.target.classList.contains('filter-type')) {\n    return;\n  }\n\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n\n  const { [Object.keys(oldParams).pop()]: _, ...rest } = oldParams;\n  newParams = { ...rest, [filter]: state };\n\n  const isChangeParams = checkedParams(oldParams, newParams);\n\n  if (!isChangeParams) {\n    return;\n  }\n\n  try {\n    showLoader();\n\n    const { results, totalPages } = await getCurrentProducts(newParams);\n    updateMarkup(results, totalPages);\n\n    saveToLS(LOCALSTORAGE_KEY, newParams);\n  } catch {\n    unsuccessSearch();\n    showError();\n  } finally {\n    hideLoader();\n  }\n}\n\nexport function setStateFilter(params) {\n  const filterBy = document.querySelector('.param-name');\n  let filter;\n  const arrParams = Object.entries(params);\n  const [sortBy, state] = arrParams[arrParams.length - 1];\n  switch (sortBy) {\n    case 'byABC':\n      state ? (filter = 'A to Z') : (filter = 'Z to A');\n      break;\n    case 'byPrice':\n      state ? (filter = 'Cheaper first') : (filter = 'Expensive first');\n      break;\n    case 'byPopularity':\n      state ? (filter = 'Not popular') : (filter = 'Popular');\n      break;\n    default:\n      filter = 'A to Z';\n      break;\n  }\n  filterBy.textContent = filter;\n}\n\nfunction updateMarkup(results, totalPages) {\n  if (totalPages > 1) {\n    paginationBtnWrap.innerHTML = createPagination(totalPages);\n    pagination.classList.remove('visually-hidden');\n  } else {\n    pagination.classList.add('visually-hidden');\n  }\n\n  if (!results.length) {\n    unsuccessSearch();\n  } else {\n    emptyContent.classList.add('visually-hidden');\n    mainProductMarkup(results);\n  }\n}\n","// ! -------------Style JS-------------\nconst categoryList = document.querySelector('.category-list');\nconst filtersABClist = document.querySelector('.filters-all-param-list');\nconst selectFilterCategories = document.querySelector('.select-filter');\nconst selectParamCategories = document.querySelector('.select-param');\nconst categoryName = document.querySelector('.category-name');\nconst paramName = document.querySelector('.param-name');\n\nselectFilterCategories.addEventListener('click', () =>\n  toggleFilterVisibility(categoryList)\n);\nselectParamCategories.addEventListener('click', () =>\n  toggleFilterVisibility(filtersABClist)\n);\ncategoryList.addEventListener('click', e =>\n  handleCategorySelection(e, categoryList, categoryName)\n);\nfiltersABClist.addEventListener('click', e =>\n  handleCategorySelection(e, filtersABClist, paramName)\n);\ndocument.addEventListener('click', hideFilterOnOutsideClick);\n\nexport function toggleFilterVisibility(list) {\n  list.classList.toggle('filter-hidden');\n}\n\nexport function handleCategorySelection(e, list, nameElement) {\n  const target = e.target;\n  if (\n    target.classList.contains('category-type') ||\n    target.classList.contains('filter-type')\n  ) {\n    nameElement.textContent = target.textContent;\n    list.classList.add('filter-hidden');\n  }\n}\n\nexport function hideFilterOnOutsideClick(e) {\n  const isClickInsideFirstList = selectFilterCategories.contains(e.target);\n  const isClickInsideSecondList = selectParamCategories.contains(e.target);\n\n  if (\n    !isClickInsideFirstList &&\n    !categoryList.classList.contains('filter-hidden')\n  ) {\n    categoryList.classList.add('filter-hidden');\n  }\n\n  if (\n    !isClickInsideSecondList &&\n    !filtersABClist.classList.contains('filter-hidden')\n  ) {\n    filtersABClist.classList.add('filter-hidden');\n  }\n}\n\nexport { categoryName };\n","import { getCategoryList, getCurrentProducts } from '../services/food-api';\nimport {\n  hideLoader,\n  loadFromLS,\n  saveToLS,\n  showError,\n  showLoader,\n} from '../services/helpers';\nimport { mainProductMarkup } from '../home-content/main-products/markup-main-product';\nimport {\n  changeCategory,\n  changeKeyword,\n  formSub,\n  getFilter,\n  setStateFilter,\n} from './filters-request';\nimport { categoryName } from './filters-style';\nimport { createPagination } from '../home-content/main-products/pagination';\nimport { throttle } from 'lodash';\n\nconst categoryList = document.querySelector('.category-list');\nconst filtersABClist = document.querySelector('.filters-all-param-list');\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.keyword');\nconst emptyContent = document.querySelector('.info-query');\nconst productMainList = document.querySelector('.product-list');\nconst pagination = document.querySelector('.pagination');\nconst paginationBtnWrap = document.querySelector('.pagination-btn-wrap');\n\nconst LOCALSTORAGE_KEY = 'params of search';\n\nconst defaultParams = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: checkWidth(),\n  byABC: true,\n};\n\nloadFromLS(LOCALSTORAGE_KEY) ?? saveToLS(LOCALSTORAGE_KEY, defaultParams);\n\n// Создаем разметку категорий\nasync function createCategoryList() {\n  const categories = await getCategoryList();\n  const markup = categories\n    .map(\n      category =>\n        `<li data-category=\"${category}\" class=\"category-type\">${replaceText(\n          category\n        )}</li>`\n    )\n    .join('');\n  categoryList.insertAdjacentHTML('afterbegin', markup);\n}\n\n// редактирование текста\nfunction replaceText(arg) {\n  return arg.replaceAll('_', ' ');\n}\n\n// limit\nfunction checkWidth() {\n  const screenWidth = window.innerWidth;\n  let limit = 0;\n  if (screenWidth < 768) {\n    limit = 6;\n  } else if (screenWidth >= 768 && screenWidth < 1440) {\n    limit = 8;\n  } else {\n    limit = 9;\n  }\n\n  return limit;\n}\n\n// Разметка с обновлением названий\nasync function loadMarkup() {\n  showLoader();\n\n  try {\n    const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n    const newParams = {\n      ...oldParams,\n      keyword: oldParams.keyword || null,\n      limit: checkWidth(),\n      page: 1,\n    };\n    saveToLS(LOCALSTORAGE_KEY, newParams);\n\n    const { results, totalPages } = await getCurrentProducts(newParams);\n\n    input.value = newParams.keyword;\n\n    if (totalPages > 1) {\n      paginationBtnWrap.innerHTML = createPagination(totalPages);\n      pagination.classList.remove('visually-hidden');\n    } else {\n      pagination.classList.add('visually-hidden');\n    }\n\n    if (!results.length) {\n      unsuccessSearch();\n    } else {\n      emptyContent.classList.add('visually-hidden');\n      mainProductMarkup(results);\n    }\n\n    if (newParams.category !== null) {\n      categoryName.textContent = replaceText(newParams.category);\n    } else {\n      categoryName.textContent = 'Categories';\n    }\n\n    setStateFilter(newParams);\n  } catch (err) {\n    unsuccessSearch();\n    showError();\n    console.log(err);\n  } finally {\n    hideLoader();\n  }\n}\n\nexport function unsuccessSearch() {\n  productMainList.innerHTML = '';\n  pagination.classList.add('visually-hidden');\n  emptyContent.classList.remove('visually-hidden');\n}\n\n// window.addEventListener('resize', throttle(checkWidth, 300));\nform.addEventListener('submit', formSub);\nfiltersABClist.addEventListener('click', getFilter);\ncategoryList.addEventListener('click', changeCategory);\ninput.addEventListener('input', changeKeyword);\ndocument.addEventListener('DOMContentLoaded', createCategoryList);\ndocument.addEventListener('DOMContentLoaded', loadMarkup);\n\nexport { emptyContent, productMainList, LOCALSTORAGE_KEY };\n","import {\n  loadFromLS,\n  updateAllIcon,\n  updateBasket,\n} from '../../services/helpers';\nimport { getProductById } from '../../services/food-api';\nimport { editText } from '../../services/helpers';\nimport sprite from '../../../img/icons/sprite.svg';\n//////////\nconst clouseBottun = document.querySelector('.clouse_modal');\nconst modalBackdrop = document.querySelector('.modal-backdrop-product');\nconst modal_window = document.querySelector('.modal-product');\nconst window_inModal = document.querySelector('.modal-product-inWindow');\nconst productMainList2 = document.querySelector('.product-list');\nconst popularProduct = document.querySelector('.popular-section');\nconst DiscounProduct = document.querySelector('.discount-section');\n//////\n\nconst LOCALSTORAGE_KEY = 'basket';\nlet basket;\nlet currentIdModal;\n\nconst handleClickBtn = () => optionsModal(currentIdModal, basket);\n\nfunction closeModal() {\n  document\n    .querySelector('.modal-button')\n    .removeEventListener('click', handleClickBtn);\n\n  toglModul();\n  OnScroll();\n\n  modal_window.classList.remove('visible-modal');\n}\n\nclouseBottun.addEventListener('click', function () {\n  closeModal();\n});\n\nmodalBackdrop.addEventListener('click', event => {\n  if (event.target == modalBackdrop) {\n    closeModal();\n  }\n});\n\ndocument.addEventListener('keydown', function (event) {\n  const closestRespItem = event.target.closest('.modal_window-item');\n  if (event.key === 'Escape' && document.body.style.overflow === 'hidden') {\n    toglModul();\n    OnScroll();\n  }\n});\n\nfunction toglModul() {\n  modalBackdrop.classList.toggle('is-hidden');\n}\nfunction OnScroll() {\n  document.body.style.overflow = '';\n}\n\nasync function handleClickOnLi(event) {\n  basket = loadFromLS(LOCALSTORAGE_KEY) ?? [];\n\n  const closestRespItem = event.target.closest('.resp-item');\n  if (closestRespItem) {\n    currentIdModal = closestRespItem.dataset.id;\n  }\n  const clickedButton = event.target.closest('.btn-basket');\n  if (clickedButton) {\n    return;\n  }\n  const clickButtn = event.target.closest('.btn-light-basket');\n  if (clickButtn) {\n    return;\n  }\n  /////////\n  const closestPopularItem = event.target.closest('.popular-item');\n  if (closestPopularItem) {\n    currentIdModal = closestPopularItem.dataset.id;\n  }\n\n  const closestDiscounItem = event.target.closest('.discount-item');\n  if (closestDiscounItem) {\n    currentIdModal = closestDiscounItem.dataset.id;\n  }\n\n  if (!closestRespItem && !closestPopularItem && !closestDiscounItem) {\n    return;\n  }\n\n  modal_window.classList.add('visible-modal');\n\n  const inStorage = basket.find(product => product._id == currentIdModal);\n  const currentProduct = await getProductById(currentIdModal);\n  const editTest = editText(currentProduct.category);\n  const marcap = `<div class =\"TestDiv1\"><div class=\"img_modal2\" >\n    <img class=\"photo-modal\" src=\"${currentProduct.img}\" alt=\"${\n    currentProduct.name\n  }\" width=\"160\" height=\"160\"  loading=\"lazy\"/>\n    </div>\n    <div class=\"testDiv\">\n    <h3 class=\"name-product2\">${currentProduct.name}</h3>\n    <div class=\"descr-product2\">\n    <p class=\"category-product\"><span class=\"style-word\">Category:</span>${editTest}</p>\n    <p class=\"size-product\"><span class=\"style-word\">Size:</span>${\n      currentProduct.size\n    }</p>\n    <p class=\"popular-product\"><span class=\"style-word\">Popularity:</span>${\n      currentProduct.popularity\n    }</p>\n    </div>\n    <div class=\"desc-text\"> <p class=\"textModalp\">${\n      currentProduct.desc || 'Description will be added soon'\n    }</p></div>\n    </div>\n    </div>\n    <div class=\"footer-product_card2\">\n    <p class=\"price-product\">$${currentProduct.price.toFixed(2)}</p></div>\n    <div class = \"end-modal\">\n    <button \n      type=\"button\" \n      class=\"modal-button\" \n      aria-label=\"Add or remove product from basket\"><span\n      span class =\"textInButton\">${\n        inStorage ? 'Remove from' : 'Add to'\n      }</span><svg class=\"svg-basket2\" width=\"18\" height=\"18\">\n    <use class=\"href-icon\" href=\"${sprite}#icon-basket\"></use>\n  </svg></button></div>`;\n  window_inModal.innerHTML = marcap;\n  ///\n  modal_window.style.display = 'block';\n  document.body.style.overflow = 'hidden';\n\n  toglModul();\n\n  const currentBtn = document.querySelector('.modal-button');\n  currentBtn.addEventListener('click', handleClickBtn);\n}\n\nfunction findProduct(id) {\n  const mainProducts = loadFromLS('main products');\n  const popularProducts = loadFromLS('popular products');\n  const discountProducts = loadFromLS('discount products');\n\n  const allProducts = [\n    ...mainProducts,\n    ...popularProducts,\n    ...discountProducts,\n  ];\n\n  const currentProduct = allProducts.find(product => product._id === id);\n\n  return currentProduct;\n}\n\nfunction optionsModal(id, basket) {\n  const product = findProduct(id);\n  const currentButtons = document.querySelectorAll(`[data-button-id=\"${id}\"]`);\n\n  updateBasket(LOCALSTORAGE_KEY, product, basket);\n  updateAllIcon([...currentButtons], id, basket);\n\n  const inBasket = basket.find(product => product._id === id);\n  const textInBtn = document.querySelector('.textInButton');\n\n  inBasket\n    ? (textInBtn.textContent = 'Remove from')\n    : (textInBtn.textContent = 'Add to');\n}\n\nproductMainList2.addEventListener('click', handleClickOnLi);\npopularProduct.addEventListener('click', handleClickOnLi);\nDiscounProduct.addEventListener('click', handleClickOnLi);\n"],"names":["LOCALSTORAGE_KEY","productMainList","basket","loadFromLS","handleClickBasket","event","newBasket","id","someProduct","_id","currentButton","updateBasket","updateAllIcon","counterProducts","mainProductMarkup","mainProduct","saveToLS","markup","item","formattedCategory","removeUnderscore","formatPrice","formatNumber","inStorage","sprite","text","number","pagination","paginationBtnWrap","emptyContent","prevPage","nextPage","totalPages","page","previousPage","createPagination","allPages","beforePage","afterPage","sizeScreen","plength","changePage","e","isBtn","currentPage","createPage","newPage","newParams","showLoader","results","getCurrentProducts","showError","hideLoader","refs","markupPopularList","arr","cards","name","img","category","size","popularity","product","limitPopularProduct","getPopularProducts","data","err","markupDiscountList","price","getDiscountProducts","changeCategory","currentCategory","oldParams","checkedParams","updateMarkup","unsuccessSearch","changeKeyword","saveKeyword","formSub","isChangeParams","getFilter","filter","state","changeFilter","_","rest","setStateFilter","params","filterBy","arrParams","sortBy","categoryList","filtersABClist","selectFilterCategories","selectParamCategories","categoryName","paramName","toggleFilterVisibility","handleCategorySelection","hideFilterOnOutsideClick","list","nameElement","target","isClickInsideFirstList","isClickInsideSecondList","form","input","defaultParams","checkWidth","createCategoryList","getCategoryList","replaceText","arg","screenWidth","limit","loadMarkup","clouseBottun","modalBackdrop","modal_window","window_inModal","productMainList2","popularProduct","DiscounProduct","currentIdModal","handleClickBtn","optionsModal","closeModal","toglModul","OnScroll","handleClickOnLi","closestRespItem","closestPopularItem","closestDiscounItem","currentProduct","getProductById","editTest","editText","marcap","findProduct","mainProducts","popularProducts","discountProducts","currentButtons","inBasket","textInBtn"],"mappings":"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"}