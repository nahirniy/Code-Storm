{"version":3,"file":"commonHelpers2.js","sources":["../src/js/home-content/main-products/main-products.js","../src/js/services/helpers.js","../src/js/services/food-api.js","../src/js/home-content/popular-products/markup-popular-products.js","../src/js/home-content/popular-products/popular-products.js","../src/img/icons/sprite.svg","../src/js/home-content/main-products/markup-main-product.js","../src/js/filters/filters.js"],"sourcesContent":["\n\nlet page = 1;\nlet limit = 6;\nlet totalPages = 0;\n\n/*-------------------------CHECK LIMIT(WIDTH SCRENN--------------------*/\n\nfunction addClickEventIfInRange() {\n  let rezice = window.innerWidth;\n\n  if (rezice <= 375) {\n    limit = 6;\n  } else if (rezice >= 375 && rezice <= 768) {\n    limit = 8;\n  } else {\n    limit = 9;\n  }\n}\n\naddClickEventIfInRange();\n\nwindow.addEventListener('resize', () => addClickEventIfInRange());\n\n\n\n// /*---------------------HANDLE CLICK BASKET--------------------*/\n// function handleClickBasket(event) {\n//   const clickedItem = event.currentTarget.closest('.resp-item');\n//   if (clickedItem) {\n//     const itemName = clickedItem.querySelector('.name-product').textContent;\n//     const itemPrice = clickedItem.querySelector('.price-product').textContent;\n//     const basketItem = { name: itemName, price: itemPrice };\n//     localStorage.setItem(itemName, JSON.stringify(basketItem));\n\n//     const basketIcon = clickedItem.querySelector('.href-icon');\n//     if (basketIcon) {\n//       basketIcon.setAttribute('href', `${sprite}#icon-checkmark`);\n//     }\n//   }\n// }\n","// ТУТ ПИШЕ ТІЛЬКИ МАКС\nimport { Notify } from 'notiflix';\n\nexport function saveToLS(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function loadFromLS(key) {\n  const data = localStorage.getItem(key);\n\n  try {\n    return JSON.parse(data);\n  } catch {\n    Notify.failure('Oops! Something went wrong...');\n    return data;\n  }\n}\n\nexport function createParams(parameters) {\n  const { keyword, category, page, limit, ...rest } = parameters;\n  const checkedSortBy = Object.keys(rest).length;\n\n  const params = new URLSearchParams({\n    page,\n    limit,\n  });\n\n  if (keyword) {\n    params.set('keyword', keyword);\n  }\n\n  if (category) {\n    params.set('category', category);\n  }\n\n  if (checkedSortBy) {\n    const [sortBy, state] = Object.entries(rest)[0];\n    params.set(sortBy, state);\n  }\n\n  return params;\n}\n\nexport function updateBasket(LOCALSTORAGE_KEY, currentProduct, basket) {\n  const index = basket.findIndex(product => product._id === currentProduct._id);\n\n  console.log(currentProduct);\n  index !== -1 ? basket.splice(index, 1) : basket.push(currentProduct);\n\n  saveToLS(LOCALSTORAGE_KEY, basket);\n}\n","// ТУТ ПИШЕ ТІЛЬКИ МАКС\nimport axios from 'axios';\nimport { createParams } from './helpers';\n\naxios.defaults.baseURL = 'https://food-boutique.b.goit.study/api';\n\nexport const getCategoryList = async () => {\n  const { data } = await axios.get(`/products/categories`);\n\n  return data;\n};\n\nexport const getCurrentProducts = async parameters => {\n  const params = createParams(parameters);\n\n  const { data } = await axios.get(`/products/`, { params });\n\n  return data;\n};\n\nexport const getProductById = async id => {\n  const { data } = await axios.get(`/products/${id}`);\n\n  return data;\n};\n\nexport const getPopularProducts = async limit => {\n  const { data } = await axios.get(`/products/popular?limit=${limit}`);\n\n  return data;\n};\n\nexport const getDiscountProducts = async () => {\n  const { data } = await axios.get(`/products/discount`);\n\n  return data;\n};\n\nexport const addOrder = async body => {\n  const { data } = await axios.post(`/orders`, body);\n\n  return data;\n};\n\nexport const addEmail = async body => {\n  const { data } = await axios.post(`/subscription`, body);\n\n  return data;\n};\n","const refs = {\n  popularList: document.querySelector('.popular-list'),\n};\n\nexport default function markupPopularList(arr) {\n  const cards = arr.map(({ name, img, category, size, popularity, _id }) => {\n    return `<li class=\"popular-item\" data-id=\"${_id}\">\n                    <div class=\"wrapper-img\">\n                        <img\n                            src=\"${img}\"\n                            alt=\"${name}\"\n                        />\n                    </div>\n                    <div class=\"popular-product-info\">\n                        <h3 class=\"product-name\">${name}</h3>\n                        <p class=\"product-category\">Category: <span>${category.replace(\n                          '_',\n                          ' '\n                        )}</span></p>\n                        <div class=\"product-text\">\n                            <p>Size: <span>${size}</span></p>\n                            <p>Popularity: <span>${popularity}</span></p>\n                        </div>\n                    </div>\n                </li>`;\n  });\n\n  refs.popularList.insertAdjacentHTML('beforeend', cards.join(''));\n}\n","import { getPopularProducts } from '../../services/food-api';\nimport markupPopularList from './markup-popular-products';\n\nconst limitPopularProduct = 5;\n\ngetPopularProducts(limitPopularProduct).then(data => markupPopularList(data));\n","export default \"__VITE_ASSET__2f189e13__\"","import sprite from '../../../img/icons/sprite.svg';\n\n\nconst productMainList = document.querySelector('.product-list')\n\n\n/*-----------------------------------MARKUP----------------------------*/\nexport function mainProductMarkup({ results }) {\n  const markup = results\n    .map(item => {\n      let formattedCategory = removeUnderscore(item.category);\n      let formatPrice = formatNumber(item.price)\n      return `<li class=\"resp-item\" data-id=\"${item._id}\">\n        <a class=\"img-link\" href=\"${item.img}\">\n          <img class=\"photo\" src=\"${item.img}\" alt=\"${item.name}\" loading=\"lazy\"/>\n        </a>\n        <h2 class=\"name-product\">${item.name}</h2>\n        <div class=\"descr-product\">\n          <p class=\"category-product\"><span class=\"style-word\">Category:</span>${formattedCategory}</p>\n          <p class=\"size-product\"><span class=\"style-word\">Size:</span>${item.size}</p>\n          <p class=\"popular-product\"><span class=\"style-word\">Popularity:</span>${item.popularity}</p>\n        </div>\n        <div class=\"footer-product_card\">\n          <p class=\"price-product\">$${formatPrice}</p>\n          <svg class=\"svg-basket\" width=\"34\" height=\"34\">\n            <use class=\"href-icon\" href=\"${sprite}#icon-basket\"></use>\n          </svg>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  productMainList.innerHTML = markup;\n}\nfunction removeUnderscore(text) {\n  return text.replace(/_/g, ' ');\n}\nfunction formatNumber(number) {\n  if (Number.isInteger(number)) {\n    return `${number}.00`;\n  } else {\n    return number.toFixed(2);\n  }\n}\n\n","import { getCategoryList, getCurrentProducts } from '../services/food-api';\nimport { loadFromLS, saveToLS } from '../services/helpers';\nimport { mainProductMarkup } from '../home-content/main-products/markup-main-product';\n\nconst categoryList = document.querySelector('.category-list');\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.keyword');\nconst filtersABClist = document.querySelector('.filters-all-param-list');\n\nconst LOCALSTORAGE_KEY = 'params of search';\nconst defaultParams = {\n  keyword: null,\n  category: null,\n  page: 1,\n  limit: 9,\n  byABC: true,\n};\n\nloadFromLS(LOCALSTORAGE_KEY) ?? saveToLS(LOCALSTORAGE_KEY, defaultParams);\n\nasync function createCategoryList() {\n  const categories = await getCategoryList();\n  const markup = categories\n    .map(\n      category =>\n        `<option value=\"${category}\" class=\"category-type\">${replaceText(\n          category\n        )}</option>`\n    )\n    .join('');\n  categoryList.insertAdjacentHTML('afterbegin', markup);\n}\n\nasync function changeCategory(e) {\n  const currentCategory = e.target.value;\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  let newParams;\n  if (currentCategory !== 'show-all') {\n    newParams = { ...oldParams, category: currentCategory };\n  } else {\n    newParams = { ...oldParams, category: null };\n  }\n  const currentProduct = await getCurrentProducts(newParams);\n\n  if (!currentProduct) {\n    console.log('Ploha');\n  } else {\n    mainProductMarkup(currentProduct);\n  }\n  saveToLS(LOCALSTORAGE_KEY, newParams);\n}\n\nasync function changeKeyword(e) {\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  const newParams = { ...oldParams, keyword: e.target.value };\n  const newFilterBy = await getCurrentProducts(newParams);\n  mainProductMarkup(newFilterBy);\n  saveToLS(LOCALSTORAGE_KEY, newParams);\n}\n\nasync function formSub(e) {\n  e.preventDefault();\n  const currentParams = loadFromLS(LOCALSTORAGE_KEY);\n  const currentProduct = await getCurrentProducts(currentParams);\n  if (!currentProduct) {\n    console.log('Ploha');\n  } else {\n    mainProductMarkup(currentProduct);\n  }\n}\n\nfunction replaceText(arg) {\n  return arg.replaceAll('_', ' ');\n}\n\nasync function getFilter(e) {\n  let filter;\n  let state;\n  let args = e.target.value;\n  switch (args) {\n    case 'byAtoZ':\n      filter = 'byABC';\n      state = true;\n      break;\n    case 'byZtoA':\n      filter = 'byABC';\n      state = false;\n      break;\n    case 'byCheaperfirst':\n      filter = 'byPrice';\n      state = true;\n      break;\n    case 'byExpensivefirst':\n      filter = 'byPrice';\n      state = false;\n      break;\n    case 'byPopular':\n      filter = 'byPopularity';\n      state = false;\n      break;\n    case 'byNotpopular':\n      filter = 'byPopularity';\n      state = true;\n      break;\n    default:\n      filter = 'byABC';\n      state = true;\n      break;\n  }\n\n  changeFilter(filter, state);\n}\n\nasync function changeFilter(filter, state) {\n  const oldParams = loadFromLS(LOCALSTORAGE_KEY);\n  const { [Object.keys(oldParams).pop()]: _, ...rest } = oldParams;\n  const newParams = { ...rest, [filter]: state };\n  const newFilterBy = await getCurrentProducts(newParams);\n  mainProductMarkup(newFilterBy);\n  saveToLS(LOCALSTORAGE_KEY, newParams);\n}\n\nasync function loadMarkup() {\n  const defaultParams = loadFromLS(LOCALSTORAGE_KEY);\n  const currentProduct = await getCurrentProducts(defaultParams);\n  mainProductMarkup(currentProduct);\n}\n\nform.addEventListener('submit', formSub);\nfiltersABClist.addEventListener('change', getFilter);\ncategoryList.addEventListener('change', changeCategory);\ninput.addEventListener('input', changeKeyword);\ndocument.addEventListener('DOMContentLoaded', createCategoryList);\ndocument.addEventListener('DOMContentLoaded', loadMarkup);\n"],"names":["saveToLS","key","value","loadFromLS","data","Notify","createParams","parameters","keyword","category","page","limit","rest","checkedSortBy","params","sortBy","state","axios","getCategoryList","getCurrentProducts","getPopularProducts","refs","markupPopularList","arr","cards","name","img","size","popularity","_id","limitPopularProduct","sprite","productMainList","mainProductMarkup","results","markup","item","formattedCategory","removeUnderscore","formatPrice","formatNumber","text","number","categoryList","form","input","filtersABClist","LOCALSTORAGE_KEY","defaultParams","createCategoryList","replaceText","changeCategory","currentCategory","oldParams","newParams","currentProduct","changeKeyword","newFilterBy","formSub","currentParams","arg","getFilter","filter","changeFilter","_","loadMarkup"],"mappings":"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"}